<!DOCTYPE html>
<html lang='en'>
<head>
  <meta content='text/html;charset=utf-8' http-equiv='Content-Type'>
  <meta content='utf-8' http-equiv='encoding'>
  <meta name='viewport' content='width=device-width, initial-scale=1.0'>
  <title>Yet Another Chat</title>

  <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.css">

  <script src='http://cdnjs.cloudflare.com/ajax/libs/lodash.js/2.4.1/lodash.js' type='text/javascript'></script>
  <script src='http://cdnjs.cloudflare.com/ajax/libs/showdown/0.3.1/showdown.min.js' type="text/javascript"></script>

  <script src='http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.0-beta.8/angular.js' type='text/javascript'></script>
  <script src='http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.0-beta.8/angular-cookies.js' type="text/javascript"></script>

  <script src='http://cdn.firebase.com/js/client/1.0.15/firebase.js' type='text/javascript'></script>
  <script src='http://cdn.firebase.com/libs/angularfire/0.7.1/angularfire.js' type='text/javascript'></script>
  <script src='http://cdn.firebase.com/js/simple-login/1.6.0/firebase-simple-login.js' type='text/javascript'></script>

  <link href='css/app.css' rel='stylesheet'/>

  <script src='js/controllers.js' type='text/javascript'></script>
  <script src='js/filters.js'     type='text/javascript'></script>
  <script src='js/services.js'    type='text/javascript'></script>
  <script src='js/app.js'         type='text/javascript'></script>
</head>
<body ng-app='app'>
  <div class='container'>
    <section ng-controller='AuthenticationCtrl' class='authentication'>
      <button ng-show='currentUser' ng-click='logout()'
              class='btn btn-primary btn-xs'>
        Log Out {{ currentUser.username }}
      </button>
      <button ng-show='!currentUser' ng-click='login()'
              class='btn btn-primary btn-xs'>
        Log In
      </button>
    </section>

    <article class='chat'>
      <section ng-controller='MessagesCtrl' class='messages' ng-show='currentUser'>
        <div ng-repeat='(key, message) in messages'>
          <div class='meta'>
            <img ng-src='{{ message.senderUserAvatarUrl }}s=24'
                 class='avatar'>
            {{ message.createdAt | cleanTime }} &mdash; {{ message.senderUserKey }}:
            <button ng-show='deleteable(message.senderUserKey)'
                    ng-click='delete(key)'
                    class='close' aria-hidden='true'>&times;</button>
          </div>
          <div class='message well well-sm' ng-bind-html='message.text | markdown'></div>
        </div>
      </section>
      <section ng-controller='NewMessageCtrl' class='new-message row' ng-show='currentUser'>
        <form name='newMessageForm' ng-submit='create()' role='form' class='col-lg-6'>
          <div class="input-group">
            <label for='newMessageText' class='sr-only'>Have your say</label>
            <input name='newMessageText' ng-model='newMessage.text'
                   autofocus required minlength='1' class='form-control'
                   autocomplete='off' placeholder="I'm thinking that..."/>
            <span class="input-group-btn">
              <button type='submit' ng-disabled='newMessageForm.$invalid' class='btn btn-primary'>
                &raquo;
              </button>
            </span>
          </div>
        </form>
      </section>
    </article>
  </div>
</body>
</html>
